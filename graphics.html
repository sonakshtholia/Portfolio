<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphic Explorations - Sonaksh Tholia</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;700&family=Work+Sans:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
            overflow-y: auto;
            min-height: 100vh;
            font-family: 'Work Sans', sans-serif;
            padding: 100px 20px 80px;
            cursor: none;
        }

        .page-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        .page-title {
            font-family: 'Oswald', sans-serif;
            font-size: 4rem;
            font-weight: 500;
            text-align: center;
            margin-bottom: 4rem;
            text-transform: uppercase;
            letter-spacing: -1px;
            color: #eee;
        }

        @media (max-width: 600px) {
            .page-title {
                font-size: 2.5rem;
            }
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            font-family: 'Work Sans', sans-serif;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #fff;
            text-decoration: none;
            padding: 8px 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
            cursor: none;
        }
        
        .back-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: #fff;
            transform: scale(1.05);
        }

        .graphics-masonry-container {
            column-count: 3;
            column-gap: 1.5rem;
            position: relative;
            z-index: 5;
        }
        
        @media (max-width: 900px) { 
            .graphics-masonry-container { 
                column-count: 2; 
            } 
        }
        
        @media (max-width: 600px) { 
            .graphics-masonry-container { 
                column-count: 1; 
            } 
        }

        .graphic-item {
            background-color: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
            cursor: none;
            margin-bottom: 1.5rem;
            display: inline-block;
            width: 100%;
            break-inside: avoid;
            transition: all 0.3s ease;
            position: relative;
        }

        .graphic-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 25px 5px rgba(0, 255, 102, 0.4);
            border-color: rgba(0, 255, 102, 0.6);
            z-index: 15;
        }

        .graphic-item img {
            display: block;
            width: 100%;
            height: auto;
            object-fit: cover;
            background-color: #111;
        }

        .lightbox-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            justify-content: center;
            align-items: center;
            cursor: none;
        }
        
        .lightbox-modal.active {
            display: flex;
        }
        
        .lightbox-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease;
        }
        
        @keyframes zoomIn {
            from { 
                transform: scale(0.8); 
                opacity: 0;
            }
            to { 
                transform: scale(1); 
                opacity: 1;
            }
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: none;
            z-index: 2001;
        }
        
        .lightbox-close:hover {
            color: #00ff66;
        }

        .loading-indicator {
            text-align: center;
            color: #666;
            padding: 2rem;
            font-size: 1.2rem;
        }

        .error-msg {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            padding: 1rem;
            margin: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        /* Butterfly Cursor Styles */
        .butterfly-cursor {
            position: fixed;
            width: 40px;
            height: 40px;
            pointer-events: none;
            z-index: 9999;
            transform-origin: center;
            transition: transform 0.1s ease;
        }
        
        .butterfly-body {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 16px;
            background-color: white;
            border-radius: 50%;
            z-index: 2;
            transition: background-color 0.2s ease, filter 0.2s ease;
        }
        
        .butterfly-wing {
            position: absolute;
            width: 20px;
            height: 24px;
            background-color: white;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            transition: background-color 0.2s ease, filter 0.2s ease;
            animation: flapWings 0.8s infinite ease-in-out;
        }
        
        .butterfly-wing-left { 
            left: 0; 
            transform-origin: right center; 
            transform: rotate(-20deg); 
        }
        
        .butterfly-wing-right { 
            right: 0; 
            transform-origin: left center; 
            transform: rotate(20deg); 
        }
        
        .butterfly-wing-left-back { 
            left: 5px; 
            top: 10px; 
            transform: rotate(-40deg); 
            width: 15px; 
            height: 20px; 
            opacity: 0.7; 
        }
        
        .butterfly-wing-right-back { 
            right: 5px; 
            top: 10px; 
            transform: rotate(40deg); 
            width: 15px; 
            height: 20px; 
            opacity: 0.7; 
        }
        
        @keyframes flapWings {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(0.8); }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Home</a>

    <div class="page-container">
        <h1 class="page-title">Graphic Explorations</h1>
        
        <div id="loadingMsg" class="loading-indicator">Loading images...</div>

        <div class="graphics-masonry-container" id="gallery">
            <!-- Images will be loaded here -->
        </div>
    </div>

    <div id="imageLightbox" class="lightbox-modal">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightboxImage" alt="Full size image">
    </div>

    <!-- Butterfly Cursor -->
    <div class="butterfly-cursor">
        <div class="butterfly-wing butterfly-wing-left"></div>
        <div class="butterfly-wing butterfly-wing-right"></div>
        <div class="butterfly-wing butterfly-wing-left-back"></div>
        <div class="butterfly-wing butterfly-wing-right-back"></div>
        <div class="butterfly-body"></div>
    </div>

    <!-- Hidden canvas for color sampling -->
    <canvas id="colorCanvas" style="display: none;"></canvas>

    <script>
        // Image URLs - using direct Imgur links
        const imageData = [
            { src: "https://i.imgur.com/Ah0bpyk.png", alt: "Awakening" },
            { src: "https://i.imgur.com/6Pg1tlR.png", alt: "Brain Damage" },
            { src: "https://i.imgur.com/SCxTUoi.png", alt: "Naked Man Fears No Pickpocket" },
            { src: "https://i.imgur.com/xo6xKMr.png", alt: "White Ferrari" },
            { src: "https://i.imgur.com/BPRecTV.png", alt: "You've Gone Too Far" },
            { src: "https://i.imgur.com/qAiqGKO.png", alt: "Run" },
            { src: "https://i.imgur.com/qpSCYJV.png", alt: "Nights" },
            { src: "https://i.imgur.com/xS8PcYV.png", alt: "TDL Adrien" },
            { src: "https://i.imgur.com/kr9tB9W.png", alt: "Meditate" },
            { src: "https://i.imgur.com/EuNl9QI.png", alt: "Jesse" },
            { src: "https://i.imgur.com/nIcXK61.png", alt: "Nights 2" },
            { src: "https://i.imgur.com/KwpLmaS.png", alt: "TDL Adrien 2" },
            { src: "https://i.imgur.com/azjQtZ1.png", alt: "Meditate 2" },
            { src: "https://i.imgur.com/8AJOJJP.png", alt: "Jesse 2" },
            { src: "https://i.imgur.com/K3skaeY.png", alt: "Jesse 3" },
            { src: "https://i.imgur.com/HF2g33w.png", alt: "Nights 3" },
            { src: "https://i.imgur.com/bbqIujP.png", alt: "TDL Adrien 3" },
            { src: "https://i.imgur.com/7qlIpE8.png", alt: "Meditate 3" },
            { src: "https://i.imgur.com/vFqeXxf.png", alt: "Last" },
            { src: "https://i.imgur.com/5CfLrwv.png", alt: "Jesse 4" },
            { src: "https://i.imgur.com/gWGWJpI.png", alt: "Meditate 4" },
            { src: "https://i.imgur.com/HQMEt2E.png", alt: "Jesse 5" },
            { src: "https://i.imgur.com/nAAK7CG.png", alt: "Nights 4" },
            { src: "https://i.imgur.com/3uCMoGV.png", alt: "TDL Adrien 4" },
            { src: "https://i.imgur.com/7cDONFI.png", alt: "Meditate 5" },
            { src: "https://i.postimg.cc/9QQ2VjFT/Artboard-1.png", alt: "Artboard 1" },
            { src: "https://i.postimg.cc/CxQ3gB2V/Artboard-22.png", alt: "Artboard 22" },
            { src: "https://i.postimg.cc/bNzcHjnR/Artboard-3.png", alt: "Artboard 3" },
            { src: "https://i.postimg.cc/WzTKnMdb/dont-be-a-stranger.png", alt: "Don't Be A Stranger" },
            { src: "https://i.postimg.cc/15R2Vrxv/mr-tottenham.png", alt: "Mr Tottenham" }
        ];

        const gallery = document.getElementById('gallery');
        const lightbox = document.getElementById('imageLightbox');
        const lightboxImg = document.getElementById('lightboxImage');
        const closeBtn = document.querySelector('.lightbox-close');
        const loadingMsg = document.getElementById('loadingMsg');
        
        let loadedCount = 0;
        let errorCount = 0;

        // Load images
        imageData.forEach((imgData, index) => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'graphic-item';
            
            const img = document.createElement('img');
            img.alt = imgData.alt;
            img.crossOrigin = 'anonymous';
            
            img.onload = () => {
                loadedCount++;
                checkLoadingComplete();
            };
            
            img.onerror = () => {
                errorCount++;
                img.src = `https://placehold.co/400x500/1a1a1a/cccccc?text=${encodeURIComponent('Image ' + (index + 1))}`;
                checkLoadingComplete();
            };
            
            img.src = imgData.src;
            
            itemDiv.appendChild(img);
            gallery.appendChild(itemDiv);
            
            // Click handler for lightbox
            itemDiv.addEventListener('click', () => {
                lightbox.classList.add('active');
                lightboxImg.src = img.src;
            });
        });

        function checkLoadingComplete() {
            if (loadedCount + errorCount === imageData.length) {
                loadingMsg.style.display = 'none';
                if (errorCount > 0) {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'error-msg';
                    errorDiv.textContent = `Note: ${errorCount} image(s) failed to load and show placeholders`;
                    gallery.parentNode.insertBefore(errorDiv, gallery);
                }
            }
        }

        // Close lightbox
        closeBtn.addEventListener('click', () => {
            lightbox.classList.remove('active');
        });

        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                lightbox.classList.remove('active');
            }
        });

        // ESC key to close
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                lightbox.classList.remove('active');
            }
        });

        // === BUTTERFLY CURSOR LOGIC ===
        const butterflyCursor = document.querySelector('.butterfly-cursor');
        const butterflyBody = document.querySelector('.butterfly-body');
        const butterflyWings = document.querySelectorAll('.butterfly-wing');
        const colorCanvas = document.getElementById('colorCanvas');
        const ctx = colorCanvas.getContext('2d', { willReadFrequently: true });
        
        let lastMouseX = 0;
        let lastMouseY = 0;
        let angle = 90;

        // Sample color from element under cursor
        function getColorUnderCursor(x, y) {
            const element = document.elementFromPoint(x, y);
            
            if (!element) return 'rgb(255, 255, 255)';
            
            // Check if hovering over an image
            if (element.tagName === 'IMG' && element.complete) {
                try {
                    // Get image dimensions and position
                    const rect = element.getBoundingClientRect();
                    const imgX = x - rect.left;
                    const imgY = y - rect.top;
                    
                    // Scale to actual image size
                    const scaleX = element.naturalWidth / rect.width;
                    const scaleY = element.naturalHeight / rect.height;
                    
                    // Draw a small section of the image to canvas
                    colorCanvas.width = 1;
                    colorCanvas.height = 1;
                    ctx.drawImage(
                        element, 
                        imgX * scaleX, imgY * scaleY, 1, 1,
                        0, 0, 1, 1
                    );
                    
                    // Get pixel color
                    const pixel = ctx.getImageData(0, 0, 1, 1).data;
                    return `rgb(${pixel[0]}, ${pixel[1]}, ${pixel[2]})`;
                } catch (e) {
                    // CORS error or other issue - fall back to computed style
                    return getComputedColor(element);
                }
            }
            
            return getComputedColor(element);
        }

        function getComputedColor(element) {
            const styles = window.getComputedStyle(element);
            const bgColor = styles.backgroundColor;
            const color = styles.color;
            
            // Prefer background color, fall back to text color
            if (bgColor && bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
                return bgColor;
            }
            return color || 'rgb(255, 255, 255)';
        }

        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }

            return [h * 360, s * 100, l * 100];
        }

        function getContrastColor(rgbString) {
            const match = rgbString.match(/\d+/g);
            if (!match) return 'rgb(255, 255, 255)';
            
            const [r, g, b] = match.map(Number);
            const [h, s, l] = rgbToHsl(r, g, b);
            
            // If very dark, use white or bright color
            if (l < 30) {
                return `hsl(${h}, ${Math.max(s, 70)}%, 85%)`;
            }
            // If very light, use dark or saturated version
            if (l > 70) {
                return `hsl(${h}, ${Math.max(s, 70)}%, 25%)`;
            }
            // Otherwise, shift hue and adjust saturation/lightness
            const newH = (h + 180) % 360;
            return `hsl(${newH}, ${Math.min(s * 1.5, 100)}%, ${l > 50 ? 30 : 70}%)`;
        }

        function updateButterflyPosition(e) {
            const mouseX = e.clientX;
            const mouseY = e.clientY;
            
            requestAnimationFrame(() => {
                butterflyCursor.style.left = `${mouseX - butterflyCursor.offsetWidth / 2}px`;
                butterflyCursor.style.top = `${mouseY - butterflyCursor.offsetHeight / 2}px`;
                
                const dx = mouseX - lastMouseX;
                const dy = mouseY - lastMouseY;
                
                if (Math.abs(dx) > 1 || Math.abs(dy) > 1) {
                    angle = Math.atan2(dy, dx) * (180 / Math.PI) + 90;
                }
                
                butterflyCursor.style.transform = `rotate(${angle}deg)`;
                lastMouseX = mouseX;
                lastMouseY = mouseY;
                
                // Get color under cursor and apply contrast color
                const color = getColorUnderCursor(mouseX, mouseY);
                const contrastColor = getContrastColor(color);
                
                butterflyBody.style.backgroundColor = contrastColor;
                butterflyWings.forEach(wing => {
                    wing.style.backgroundColor = contrastColor;
                });
            });
        }

        document.addEventListener('mousemove', updateButterflyPosition);

        // Wing flapping speed based on movement
        let isMoving = false;
        let moveTimeout;
        
        document.addEventListener('mousemove', function() {
            isMoving = true;
            butterflyWings.forEach(wing => { 
                wing.style.animationDuration = '0.3s'; 
            });
            
            clearTimeout(moveTimeout);
            moveTimeout = setTimeout(() => {
                isMoving = false;
                butterflyWings.forEach(wing => { 
                    wing.style.animationDuration = '0.8s'; 
                });
            }, 150);
        });
    </script>
</body>
</html>
